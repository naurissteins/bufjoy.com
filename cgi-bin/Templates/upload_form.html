<TMPL_INCLUDE menu-1.html> 
<TMPL_INCLUDE top_menu.html>  	

<TMPL_INCLUDE upload_menu.html>

<div id="upload_div" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 mt-10">	
	<TMPL_IF hosts>
		Upload server: 
		<select onchange="window.location='/?op=upload_file&srv_id='+$(this).val()">
		<TMPL_LOOP hosts>
		<optgroup label="<TMPL_VAR host_name>">
			<TMPL_LOOP servers><option value="<TMPL_VAR srv_id>"<TMPL_VAR selected>><TMPL_VAR srv_name></option></TMPL_LOOP>
		</optgroup>
		</TMPL_LOOP>
		</select>
	</TMPL_IF>


	<div id="div_file" class="upload_block">
		
		<form name="file" enctype="multipart/form-data" action="<TMPL_VAR srv_upload_url>/upload/<TMPL_VAR disk_id>" method="post" onSubmit="return StartUpload(this);">
		<input type="hidden" name="sess_id" value="<TMPL_VAR sess_id>">
		<input type="hidden" name="json" value="0">
		
        <div id="divinputfile" class="relative flex justify-center items-center bg-gray-700/10 border-2 border-dashed p-10 mx-auto h-[26rem] rounded-md border-gray-500">
            <TMPL_IF show_upload_srv_id>
            	<span class="absolute top-0 right-0 m-2 text-gray-500 text-xs">Server ID #<TMPL_VAR srv_id></span>
			</TMPL_IF>

            <label for="filepc" class="cursor-pointer w-full h-full flex flex-col justify-center items-center">
                <input id="filepc" name="file" type="file" onchange="fileSelected(this);" class="hidden" <TMPL_UNLESS allow_non_video_uploads> accept=".mp4, .mkv, .avi, .webm, .ts, .mpg, .mpeg, .vob, .flv, .wmv, .3gp, .mov"</TMPL_UNLESS> multiple>
                <h1 class="text-4xl font-bold tracking-tight text-white sm:text-3xl text-center">Select or <span class="text-indigo-400">Drag & Drop</span> Files to Upload</h1> 
                <h5 class="text-md mt-3 text-gray-500">All video formats allowed. Max upload per file <TMPL_VAR max_upload_filesize> Mb</h5>
            </label>
        </div>
		<div id="x2"></div>
		</form>
	</div>
</div>	

<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 mt-10">	

	<div id="progress">
		<div class="bg-gray-800 dark:bg-gray-800 relative h-2.5 w-full rounded-2xl">
			<div class="bg-gradient-to-r from-green-500 to-blue-500 absolute top-0 left-0 h-full rounded-2xl progress-bar smooth-progress">
			</div>
		</div>
	
		<div id="progress_info">
			<!-- Base block -->
			<div class="relative overflow-hidden rounded-lg bg-gray-700/10 px-4 pb-3 pt-5 shadow sm:px-6 sm:pt-6 mt-6">

				<span class="absolute top-0 left-0 flex h-3 w-3 mt-2 ml-2">
					<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
					<span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
				</span>
		
				<a href="#" onClick="window.location='<TMPL_VAR site_url>/?op=upload';" class="absolute top-0 right-0 mt-2 mr-2 inline-flex items-center rounded-md bg-white/10 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-white/20">Abort</a>
				<dt>
					<div class="absolute rounded-full bg-gray-800 w-12 h-12 flex justify-center items-center">
						<span class="text-sm font-semibold text-white" id='percent'>0%</span>
					</div>
					<p class="ml-16 truncate text-md font-medium text-gray-400">
						<span id='cursize'></span> of <span id='totalsize'></span>
					</p>
				</dt>
				<dd class="ml-16 flex items-baseline pb-2 sm:pb-2">
					<p class="text-lg font-semibold text-gray-300">
						<span id='speed'></span> KB/s
						<span class="text-xs text-gray-500 font-medium"><TMPL_VAR lng_uploadform_remaining>: <em id='estimate'></em></span>
					</p>
				</dd>
			</div>
			<!-- Base block -->
		</div>
	
		<div id='progress_msg' class="text-center">
			<TMPL_VAR lng_uploadform_initializing>
		</div>
	</div>

</div>

<TMPL_IF msg>
	<div x-data="{ isOpen: true }" x-init="setTimeout(() => isOpen = false, 4000)" x-show="isOpen" x-transition:enter="transform ease-out duration-300 transition" x-transition:enter-start="translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2" x-transition:enter-end="translate-y-0 opacity-100 sm:translate-x-0" x-transition:leave="transition ease-in duration-100" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" aria-live="assertive" class="pointer-events-none fixed inset-0 z-50 flex items-end px-4 py-6 sm:items-start sm:p-6">
		<div class="flex w-full flex-col items-center space-y-4 sm:items-end">
			<div class="pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5">
			<div class="p-4">
				<div class="flex items-start">
				<div class="flex-shrink-0">
					<svg class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
					<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
				</div>
				<div class="ml-3 w-0 flex-1 pt-0.5">
					<p class="text-sm font-medium text-gray-300"><TMPL_VAR msg></p>
					<!-- <p class="mt-1 text-sm text-gray-500">Anyone with a link can now view this file.</p> -->
				</div>
				<div class="ml-4 flex flex-shrink-0">
					<button type="button" class="inline-flex rounded-md bg-gray-800 text-gray-400 hover:text-gray-500 focus:outline-none" x-on:click="isOpen = false">
					<span class="sr-only">Close</span>
					<svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
						<path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
					</svg>
					</button>
				</div>
				</div>
			</div>
			</div>
		</div>
	</div>
</TMPL_IF> 

<Style>
    /* div#progress  {background-color:transparent;}
    
    #onoff {text-align:right;color:#777;font-size:11px;}
    #bar1 {position:relative;line-height:2em;text-align: left; background-color: #1f2937; margin-bottom: 5px; border-radius: 1rem; height: 2.3rem;}
    #upload_status { width: 0%; background-color: #818cf8; border-radius: 1rem;}
    #bar2 {position: absolute; text-align: center; padding-top: .25em;width:100%;top:0;left:0;font-weight:bold; border-radius: 1rem;}
    #progress_msg {margin-top:15px;font-weight:bold;}
    #progress_info {display:none; color: #fafafa; margin-top: 20px;}
    
    #percent { color: #fafafa}
    .remining { margin-top: 5px; margin-bottom: 10px;} */
	#progress {position:absolute; display:none;}
	#progress_info {display:none;}
	#progress_msg {margin-top: 1rem; color: #fafafa; font-weight: 500;}
	/* .smooth-progress {
    transition: width 1s ease;
} */

</Style>




<TMPL_INCLUDE menu-2.html> 


<iframe src="javascript:false;" name="xupload" style="position:absolute;top:-9999px;"></iframe>
<script src="<TMPL_VAR static_url>/js/jquery.cookie.js"></script>
<script src="<TMPL_VAR static_url>/js/md5.js"></script>
<script src="<TMPL_VAR static_url>/js/hashme.js"></script>

<script>
	$(document).ready(function() {
		$("body").addClass("h-full");
		$("html").addClass("h-full");
		
		// if ($(".upload-id").length) {
		// 	$(".upload-id").removeClass("text-gray-400").addClass("text-white bg-gray-800");
		// }   
	});
</script>   	

<script>
var srv_htdocs_url="<TMPL_VAR srv_htdocs_url>";
var ext_allowed="<TMPL_UNLESS allow_non_video_uploads><TMPL_VAR video_extensions></TMPL_UNLESS>";
var category_required="<TMPL_VAR category_required>";
var lng_uploadform_ext_not_allowed="<TMPL_VAR lng_uploadform_ext_not_allowed>";
var lng_uploadform_only_these_ext_allowed="<TMPL_VAR lng_uploadform_only_these_ext_allowed>";
var lng_uploadform_choose_category="<TMPL_VAR lng_uploadform_choose_category>";
var lng_uploadform_select_file_to_upload="<TMPL_VAR lng_uploadform_select_file_to_upload>";
var lng_uploadform_agree_to_tos="<TMPL_VAR lng_uploadform_agree_to_tos>";
var interval, total, time_start;
<TMPL_IF m_n_instant_md5_upload>var auto_md5_upload=1;</TMPL_IF>
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    var dropArea = document.getElementById('divinputfile');
    var fileInput = document.getElementById('filepc');

    // Prevent default drag behaviors
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    // Highlight drop area when item is dragged over it
    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });

    function highlight(e) {
        dropArea.classList.add('border-indigo-400');
    }

    function unhighlight(e) {
        dropArea.classList.remove('border-indigo-400');
    }

    // Handle dropped files
    dropArea.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
        var dt = e.dataTransfer;
        var files = dt.files;

        handleFiles(files);
    }

    function handleFiles(files) {
        fileInput.files = files;
        if (files.length > 0) {
            fileSelected(fileInput); // Assuming fileSelected is your existing function to handle file selection
        }
    }
});

</script>