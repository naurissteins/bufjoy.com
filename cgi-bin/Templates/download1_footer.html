<TMPL_UNLESS file_status_LOCKED>
  <!-- Share modal -->
  <div x-data="modal" x-cloak id="modal-1" class="fixed z-50 inset-0 overflow-y-auto add-folder"
    aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <div x-bind="modalOverlay" class="fixed inset-0 bg-gray-950 bg-opacity-80 transition-opacity"
        aria-hidden="true">
      </div>
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
      <div x-bind="modalContent"
        class="inline-block align-bottom bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle max-w-screen-md sm:p-6">
        <div class="hidden sm:block absolute top-0 right-0 pt-2 pr-2">
          <button x-bind="modalClose" type="button"
            class="bg-gray-800 rounded-md text-gray-400 hover:text-gray-300 focus:outline-none ">
            <span class="sr-only">Close</span>
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="sm:items-start">
          <div class="text-center sm:mt-0 sm:text-left">
            <div
              x-data="{openTab: 1, activeClasses: 'border-b-2 border-indigo-500', inactiveClasses: 'text-grey-400 hover:border-indigo-500 hover:border-b-2'}">
              <div>
                <div class="sm:hidden">
                  <label for="tabs" class="sr-only">Select a tab</label>
                  <!-- Use an "onChange" listener to redirect the user to the selected tab URL. -->
                  <select id="tabs" name="tabs"
                    class="block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500">
                    <option>My Account</option>
                    <option>Company</option>
                    <option selected>Team Members</option>
                    <option>Billing</option>
                  </select>
                </div>
                <div class="hidden sm:block border-b border-gray-700">
                  <nav class="-mb-px flex" aria-label="Tabs">
                    <span @click="openTab = 1">
                      <a :class="openTab === 1 ? activeClasses : inactiveClasses" href="#"
                        class="relative inline-flex items-center gap-x-1.5  px-3 py-2 text-sm font-medium text-gray-100">File
                        Link</a>
                    </span>
                    <span @click="openTab = 2">
                      <a :class="openTab === 2 ? activeClasses : inactiveClasses" href="#"
                        class="relative inline-flex items-center gap-x-1.5  px-3 py-2 text-sm  font-medium text-gray-100">Embed
                        Link</a>
                    </span>
                    <span @click="openTab = 3">
                      <a :class="openTab === 3 ? activeClasses : inactiveClasses" href="#"
                        class="relative inline-flex items-center gap-x-1.5  px-3 py-2 text-sm  font-medium text-gray-100">Embed
                        Code</a>
                    </span>
                    <TMPL_IF video_file>
                      <span @click="openTab = 4">
                        <a :class="openTab === 4 ? activeClasses : inactiveClasses" href="#"
                          class="relative inline-flex items-center gap-x-1.5  px-3 py-2 text-sm  font-medium text-gray-100">Snapshot</a>
                      </span>
                      <span @click="openTab = 5">
                        <a :class="openTab === 5 ? activeClasses : inactiveClasses" href="#"
                          class="relative inline-flex items-center gap-x-1.5  px-3 py-2 text-sm  font-medium text-gray-100">Screenlist</a>
                      </span>
                    </TMPL_IF>
                  </nav>
                </div>
                <div x-cloak x-show="openTab === 1" class="">
                  <div class="mt-4">
                    <input value="<TMPL_VAR download_link>"
                      class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                      onclick="this.select();" readonly>
                  </div>
                </div>
                <div x-cloak x-show="openTab === 2" class="">
                  <div class="mt-4">
                    <input value="<TMPL_VAR static_url>/e/<TMPL_VAR file_code>"
                      class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                      onclick="this.select();" readonly>
                  </div>
                </div>
                <div x-cloak x-show="openTab === 3" class="">
                  <div class="mt-4">
                    <input value='<TMPL_VAR embed_code>'
                      class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                      onclick="this.select();" readonly>
                  </div>
                </div>
                <TMPL_IF video_file>
                  <div x-cloak x-show="openTab === 4" class="">
                    <div class="mt-4">
                      <img src="<TMPL_VAR video_img_url>" class="w-full rounded-lg mb-4" />
                      <input value="<TMPL_VAR video_img_url>"
                        class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                        onclick="this.select();" readonly>
                    </div>
                  </div>
                  <div x-cloak x-show="openTab === 5" class="">
                    <div class="mt-4">
                      <img src="<TMPL_VAR img_screenlist>" class="w-full rounded-lg mb-4" />
                      <input value="<TMPL_VAR img_screenlist>"
                        class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                        onclick="this.select();" readonly>
                    </div>
                  </div>
                </TMPL_IF>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Download Modal-->
  <div x-data="modal" x-cloak id="modal-3" class="fixed z-10 inset-0 overflow-y-auto add-folder"
    aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <div x-bind="modalOverlay" class="fixed inset-0 bg-gray-950 bg-opacity-80 transition-opacity"
        aria-hidden="true"></div>
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
      <div x-bind="modalContent"
        class="inline-block align-bottom bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full sm:p-6">
        <div class="hidden sm:block absolute top-0 right-0 pt-4 pr-4">
          <button x-bind="modalClose" type="button"
            class="bg-gray-800 rounded-md text-gray-300 hover:text-gray-400 focus:outline-none ">
            <span class="sr-only">Close</span>
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="sm:items-start">
          <div class="text-center sm:mt-0 sm:text-left">
            <TMPL_IF downloads>
              <div>
                <dl class="divide-y divide-white/20">
                  <div class="px-4 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0">
                    <dd class="mt-2 text-sm text-white sm:col-span-2 sm:mt-0">
                      <ul role="list" class="divide-y divide-white/20 rounded-md border border-white/20">
                        <TMPL_LOOP versions>
                          <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
                            <div class="flex w-0 flex-1 items-center">
                              <svg class="h-5 w-5 flex-shrink-0 fill-gray-400" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 576 512">
                                <path
                                  d="M64 112c-8.8 0-16 7.2-16 16V384c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H64zM0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64v33V351v33c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM528 363.4V148.6L416 199V146.4L520.3 99.5c5.1-2.3 10.6-3.5 16.2-3.5c21.8 0 39.5 17.7 39.5 39.5v241c0 21.8-17.7 39.5-39.5 39.5c-5.6 0-11.1-1.2-16.2-3.5L416 365.6V313l112 50.4z" />
                              </svg>
                              <div class="ml-4 flex min-w-0 flex-1 gap-2">
                                <span class="truncate font-medium">
                                  <TMPL_VAR vid_title>
                                </span>
                                <span class="flex-shrink-0 text-gray-400 items-center justify-between ">
                                  <TMPL_VAR vid_width>x<TMPL_VAR vid_height>
                                </span>
                                <span
                                  class="flex-shrink-0 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-1 text-xs font-medium text-gray-400 bg-gray-400/10 ml-auto">
                                  <TMPL_VAR file_size_mb>
                                </span>
                              </div>
                            </div>
                            <div class="ml-4 flex-shrink-0">
                              <TMPL_IF not_available>
                                <a href="#" x-bind="modalClose" target="_blank"
                                  onclick="alert('<TMPL_VAR lng_download_premium_for_originals>');return false;"></a>
                                <TMPL_ELSE>
                                  <a x-bind="modalClose" target="_blank" href="<TMPL_VAR quality_download_link>"
                                    class="relative inline-flex items-center gap-x-1.5 rounded-md bg-indigo-500 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-indigo-400">Download</a>
                              </TMPL_IF>
                            </div>
                          </li>
                        </TMPL_LOOP>
                      </ul>
                    </dd>
                  </div>
                </dl>
              </div>
              <TMPL_IF audio_extract_on>
                <br>
                <form method="POST" action="/dl">
                  <input type="hidden" name="op" value="audio_extract">
                  <input type="hidden" name="file_code" value="<TMPL_VAR file_code>">
                  <input type="submit" name="dl" value="Download MP3/AAC audio"
                    style="width:200px;border:1px solid #303030;padding:5px;">
                </form>
              </TMPL_IF>
            </TMPL_IF>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Report Modal -->
  <div x-data="modal" x-cloak id="modal-2" class="fixed z-10 inset-0 overflow-y-auto add-folder"
    aria-labelledby="modal-title" role="dialog" aria-modal="true" style="display: none;">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <div x-bind="modalOverlay" class="fixed inset-0 bg-gray-950 bg-opacity-80 transition-opacity"
        aria-hidden="true">
      </div>
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
      <div x-bind="modalContent"
        class="inline-block align-bottom bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
        <form method="POST" action="/"
          onsubmit="$.post('/',$(this).serialize(),function(code){ eval(code); } );return false;">
          <input type="hidden" name="op" value="report_file">
          <input type="hidden" name="file_code" value="<TMPL_VAR file_code>">
          <div class="hidden sm:block absolute top-0 right-0 pt-4 pr-4">
            <button x-bind="modalClose" type="button"
              class="rounded-md text-gray-300 hover:text-gray-400 focus:outline-none ">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="sm:items-start">
            <div class="text-center sm:mt-0 sm:text-left">
              <h3 class="text-md leading-0 font-medium text-gray-300" id="modal-title">
                Reason
              </h3>
            </div>

            <div class="box mt-2 text-green-400" id="id_flag">
              <select name="report_type" id="reportTypeSelect"
                class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black">
                <option>
                  <TMPL_VAR lng_download_flag_reason1>
                </option>
                <option>
                  <TMPL_VAR lng_download_flag_reason2>
                </option>
                <option>
                  <TMPL_VAR lng_download_flag_reason3>
                </option>
                <option>
                  <TMPL_VAR lng_download_flag_reason4>
                </option>
                <option>Contact Us</option>
              </select>
              <textarea name="report_info" rows="3" placeholder="<TMPL_VAR lng_download_flag_details>"
                class="mt-3 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"></textarea>
              <!-- <input type="submit" name="add" value="<TMPL_VAR lng_download_flag_send>" class="f-btn-blue"> -->
              <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                <input type="submit" name="add" value="<TMPL_VAR lng_download_flag_send>"
                  class="relative inline-flex cursor-pointer items-center gap-x-1.5 rounded-md bg-indigo-500 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">
              </div>
            </div>
          </div>
      </div>
      </form>
    </div>
  </div>

  <!-- Add to Playlist Modal -->
  <TMPL_IF my_login>
    <div x-data="modal" x-cloak id="modal-4" class="fixed z-10 inset-0 overflow-y-auto add-folder"
      aria-labelledby="modal-title" role="dialog" aria-modal="true">
      <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div x-bind="modalOverlay" class="fixed inset-0 bg-gray-950 bg-opacity-80 transition-opacity"
          aria-hidden="true"></div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div x-bind="modalContent"
          class="inline-block align-bottom bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full sm:p-6">
          <div class="hidden sm:block absolute top-0 right-0 pt-4 pr-4">
            <button x-bind="modalClose" type="button"
              class="rounded-md text-gray-300 hover:text-gray-400 focus:outline-none ">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="sm:items-start">
            <div class="text-center sm:mt-0 sm:text-left">
              <h3 class="text-md leading-0 font-medium text-gray-300 -mt-2">
                <TMPL_VAR lng_download_add_to_playlist>
              </h3>
            </div>

            <div class="mt-2">
              <dl class="">
                <div id="add_to" class="px-4 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0">
                  <dd class="mt-2 text-sm text-white sm:col-span-2 sm:mt-0">
                    <ul role="list" class="divide-y divide-white/20 rounded-md border border-white/20">
                      <TMPL_LOOP playlists>
                        <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
                          <div class="flex w-0 flex-1 items-center">
                            <!-- <svg class="h-5 w-5 flex-shrink-0 fill-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M64 112c-8.8 0-16 7.2-16 16V384c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H64zM0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64v33V351v33c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM528 363.4V148.6L416 199V146.4L520.3 99.5c5.1-2.3 10.6-3.5 16.2-3.5c21.8 0 39.5 17.7 39.5 39.5v241c0 21.8-17.7 39.5-39.5 39.5c-5.6 0-11.1-1.2-16.2-3.5L416 365.6V313l112 50.4z"/></svg> -->
                            <svg class="h-4 w-4 flex-shrink-0 fill-gray-400" xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 512 512">
                              <path
                                d="M498.7 6c8.3 6 13.3 15.7 13.3 26V96c0 13.8-8.8 26-21.9 30.4L416 151.1V432c0 44.2-50.1 80-112 80s-112-35.8-112-80s50.1-80 112-80c17.2 0 33.5 2.8 48 7.7V128 64c0-13.8 8.8-26 21.9-30.4l96-32C479.6-1.6 490.4 0 498.7 6zM32 64H256c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96S14.3 64 32 64zm0 128H256c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z">
                              </path>
                            </svg>
                            <div class="ml-4 flex min-w-0 flex-1 gap-2">
                              <span class="truncate font-medium">
                                <TMPL_VAR pls_name>
                              </span>
                              <span
                                class="flex-shrink-0 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-1 text-xs font-medium text-gray-400 bg-gray-400/10">
                                <TMPL_VAR num>
                              </span>
                            </div>
                          </div>
                          <div class="ml-4 flex-shrink-0">
                            <a href="/?op=add_to_playlist&file_code=<TMPL_VAR file_code>&pls_id=<TMPL_VAR pls_id>&<TMPL_VAR token_str>"
                              class="relative inline-flex items-center gap-x-1.5 rounded-md bg-indigo-500 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-indigo-400"
                              onclick="return jah(this.href,$(this).parent())">Add to
                              Playlist</a>
                          </div>
                        </li>
                      </TMPL_LOOP>
                    </ul>
                  </dd>
                </div>
              </dl>
            </div>

            <div class="flex mt-3">
              <div>
                <a href="/?op=add_to_playlist&file_code=<TMPL_VAR file_code>&pls_id=watchlater&<TMPL_VAR token_str>"
                  class="inline-flex items-center gap-x-1.5 rounded-md bg-white/10 px-2.5 py-1.5 text-sm font-semibold text-gray-200 shadow-sm hover:bg-white/20"
                  onclick="return jah(this.href,$(this).parent())">
                  Add to watch later
                  <span
                    class="inline-flex items-center rounded-md bg-white px-1.5 py-0.5 text-xs font-medium text-gray-900 ">
                    <TMPL_VAR playlist_watch_later>
                  </span>
                </a>
              </div>
              <div class="ml-auto">
                <button type="button"
                  class="inline-flex items-center gap-x-1.5 rounded-md bg-white/10 px-2.5 py-1.5 text-sm font-semibold text-gray-200 shadow-sm hover:bg-white/20"
                  onclick="var x=prompt('<TMPL_VAR lng_download_new_playlist_name>:','');if(typeof(x)=='undefined'||x==null)return false; return jah('/?op=add_to_playlist&file_code=<TMPL_VAR file_code>&<TMPL_VAR token_str>&new='+x,$(this).parent());">
                  Create a new Playlist
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </TMPL_IF>
</TMPL_UNLESS>


<TMPL_IF msg>
  <!-- Error message -->
<div x-data="{ isOpen: true }" x-init="setTimeout(() => isOpen = false, 4000)" x-show="isOpen"
  x-transition:enter="transform ease-out duration-300 transition"
  x-transition:enter-start="translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"
  x-transition:enter-end="translate-y-0 opacity-100 sm:translate-x-0"
  x-transition:leave="transition ease-in duration-100" x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0" aria-live="assertive"
  class="pointer-events-none fixed inset-0 z-50 flex items-end px-4 py-6 sm:items-start sm:p-6">
  <div class="flex w-full flex-col items-center space-y-4 sm:items-end">
    <div
      class="pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5">
      <div class="p-4">
        <div class="flex items-start">
          <div class="flex-shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-red-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
          </div>
          <div class="ml-3 w-0 flex-1 pt-0.5">
            <p class="text-sm font-medium text-gray-300">
              <TMPL_VAR msg>
            </p>
          </div>
          <div class="ml-4 flex flex-shrink-0">
            <button type="button"
              class="inline-flex rounded-md bg-gray-800 text-gray-400 hover:text-gray-500 focus:outline-none"
              x-on:click="isOpen = false">
              <span class="sr-only">Close</span>
              <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"
                aria-hidden="true">
                <path
                  d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</TMPL_IF>


<TMPL_IF is_image>
  <script type="module">
    import PhotoSwipeLightbox from '<TMPL_VAR site_url>/js/photoswipe-lightbox.esm.min.js';
    const options = {
      gallery: '#my-gallery',
      children: '#pic',
      showHideAnimationType: 'none',
      maxSpreadZoom: 1, // Limit maximum zoom level
      pswpModule: () => import('<TMPL_VAR site_url>/js/photoswipe.esm.min.js')
    };
    const lightbox = new PhotoSwipeLightbox(options);
    lightbox.on('uiRegister', function () {
      lightbox.pswp.ui.registerElement({
        name: 'download-button',
        order: 8,
        isButton: true,
        tagName: 'a',

        // SVG with outline
        html: {
          isCustomSVG: true,
          inner: '<path d="M20.5 14.3 17.1 18V10h-2.2v7.9l-3.4-3.6L10 16l6 6.1 6-6.1ZM23 23H9v2h14Z" id="pswp__icn-download"/>',
          outlineID: 'pswp__icn-download'
        },

        onInit: (el, pswp) => {
          el.setAttribute('target', '_blank');
          el.setAttribute('rel', 'noopener noreferrer'); // Added noreferrer for security

          pswp.on('change', () => {
            const currentSlideElement = pswp.currSlide.data.element;
            const downloadLink = currentSlideElement.getAttribute('data-download-link');
            el.href = downloadLink;
          });

        }
      });
    });

    document.querySelectorAll('#my-gallery #pic').forEach(anchor => {
      const img = anchor.querySelector('img');
      img.onload = () => {
        anchor.setAttribute('data-pswp-width', img.naturalWidth);
        anchor.setAttribute('data-pswp-height', img.naturalHeight);
      };
      if (img.complete) {
        anchor.setAttribute('data-pswp-width', img.naturalWidth);
        anchor.setAttribute('data-pswp-height', img.naturalHeight);
      }
    });

    lightbox.init();
  </script>
</TMPL_IF>

<script>
  const selectElement = document.getElementById('reportTypeSelect');

  selectElement.addEventListener('change', function () {
    const selectedOption = selectElement.options[selectElement.selectedIndex].text;

    if (selectedOption === "Contact Us") {
      window.location.href = "<TMPL_VAR site_url>/contact/";
    }
  });
</script>

<script>
  let modal = () => ({
    open: false,

    modalClose: {
      ["x-on:click"]() {
        this.open = false
      }
    },

    modalOverlay: {
      ["x-transition:enter"]: "ease-out duration-300",
      ["x-transition:enter-start"]: "opacity-0",
      ["x-transition:enter-end"]: "opacity-100",
      ["x-transition:leave"]: "ease-in duration-200",
      ["x-transition:leave-start"]: "opacity-100",
      ["x-transition:leave-end"]: "opacity-0",
      ["x-show"]() {
        return this.open
      },
    },

    modalContent: {
      ["x-transition:enter"]: "ease-out duration-300",
      ["x-transition:enter-start"]: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",
      ["x-transition:enter-end"]: "opacity-100 translate-y-0 sm:scale-100",
      ["x-transition:leave"]: "ease-in duration-200",
      ["x-transition:leave-start"]: "opacity-100 translate-y-0 sm:scale-100",
      ["x-transition:leave-end"]: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",
      ["x-on:click.outside"]: "open = false",
      ["x-show"]() {
        return this.open
      },
    },

    siderlOverlay: {
      ["x-transition:enter"]: "transition-opacity ease-linear duration-900",
      ["x-transition:enter-start"]: "opacity-0",
      ["x-transition:enter-end"]: "opacity-100",
      ["x-transition:leave"]: "transition-opacity ease-linear duration-900",
      ["x-transition:leave-start"]: "opacity-100",
      ["x-transition:leave-end"]: "opacity-0",
      ["x-show"]() {
        return this.open
      },
    },

    siderContent: {
      ["x-transition:enter"]: "transition ease-in-out duration-900 transform",
      ["x-transition:enter-start"]: "translate-x-full",
      ["x-transition:enter-end"]: "translate-x-0",
      ["x-transition:leave"]: "transition ease-in-out duration-900 transform",
      ["x-transition:leave-start"]: "translate-x-0",
      ["x-transition:leave-end"]: "translate-x-full",
      ["x-on:click.outside"]: "open = false",
      ["x-show"]() {
        return this.open
      }
    }
  })

  window.addEventListener("DOMContentLoaded", (event) => {
    document.querySelectorAll("[x-data='modal']").forEach(el => {
      let id = el.id
      el.setAttribute(`x-on:open-modal-${id}.window`, "open = true")
      el.setAttribute("x-show", "open")

      document.querySelectorAll(`[data-modal-id="${id}"]`).forEach(el => {
        el.setAttribute("x-on:click", `$dispatch('open-modal-${id}')`)
      })
    })

    Alpine.data("modal", modal)
  })
</script>

<TMPL_VAR video_code_js>

<script src="<TMPL_VAR static_url>/js/jquery.cookie.js"></script>

<script>
  $.cookie('file_id', '<TMPL_VAR file_id>', { expires: 10 });
    <TMPL_IF aff>$.cookie('aff', '<TMPL_VAR aff>', { expires: 10 });</TMPL_IF>
    <TMPL_IF referer>$.cookie('ref_url', '<TMPL_VAR referer>', { expires: 10 });</TMPL_IF>

    <TMPL_IF enc_status>
      encStatus('<TMPL_VAR file_real_id>', 1);
    </TMPL_IF>
</script>